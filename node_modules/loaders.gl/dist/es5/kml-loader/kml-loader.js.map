{"version":3,"sources":["../../../src/kml-loader/kml-loader.js"],"names":["KML_HEADER","DEFAULT_KML_OPTIONS","normalize","testText","text","startsWith","parseText","options","xml","XMLLoader","kmlLoader","KMLParser","kml","parse","name","extension","supported","browserOnly","worker"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,IAAMA,UAAU,iGAAhB;AAKA,IAAMC,mBAAmB,GAAG;AAC1BC,EAAAA,SAAS,EAAE;AADe,CAA5B;;AAIA,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,SAAOA,IAAI,CAACC,UAAL,CAAgBL,UAAhB,CAAP;AACD;;AAED,SAASM,SAAT,CAAmBF,IAAnB,EAAwD;AAAA,MAA/BG,OAA+B,uEAArBN,mBAAqB;;AACtD,MAAMO,GAAG,GAAGC,mBAAUH,SAAV,CAAoBF,IAApB,CAAZ;;AACA,MAAMM,SAAS,GAAG,IAAIC,kBAAJ,CAAcH,GAAd,CAAlB;AACA,MAAMI,GAAG,GAAGF,SAAS,CAACG,KAAV,EAAZ;AACA,SAAON,OAAO,CAACL,SAAR,GAAoB,4BAAaU,GAAb,CAApB,GAAwCA,GAA/C;AACD;;eAEc;AACbE,EAAAA,IAAI,EAAE,KADO;AAEbC,EAAAA,SAAS,EAAE,KAFE;AAGbC,EAAAA,SAAS,EAAEP,mBAAUO,SAHR;AAIbb,EAAAA,QAAQ,EAARA,QAJa;AAKbG,EAAAA,SAAS,EAATA,SALa;AAMbW,EAAAA,WAAW,EAAE,IANA;AAObC,EAAAA,MAAM,EAAE;AAPK,C","sourcesContent":["import XMLLoader from '../formats/xml-loader/xml-loader';\nimport KMLParser from './kml-parser';\nimport normalizeKML from './kml-normalizer';\n\nconst KML_HEADER = `\\\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<kml xmlns=\"http://www.opengis.net/kml/2.2\">\n`;\n\nconst DEFAULT_KML_OPTIONS = {\n  normalize: true\n};\n\nfunction testText(text) {\n  return text.startsWith(KML_HEADER);\n}\n\nfunction parseText(text, options = DEFAULT_KML_OPTIONS) {\n  const xml = XMLLoader.parseText(text);\n  const kmlLoader = new KMLParser(xml);\n  const kml = kmlLoader.parse();\n  return options.normalize ? normalizeKML(kml) : kml;\n}\n\nexport default {\n  name: 'KML',\n  extension: 'kml',\n  supported: XMLLoader.supported,\n  testText,\n  parseText,\n  browserOnly: true,\n  worker: false\n};\n\n"],"file":"kml-loader.js"}