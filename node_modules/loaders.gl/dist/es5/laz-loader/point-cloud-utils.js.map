{"version":3,"sources":["../../../src/laz-loader/point-cloud-utils.js"],"names":["normalize","points","xMin","Infinity","yMin","zMin","xMax","yMax","zMax","i","length","Math","min","max","scale","xMid","yMid","zMid"],"mappings":";;;;;;;AAAA;AACO,SAASA,SAAT,CAAmBC,MAAnB,EAA2B;AAChC,MAAIC,IAAI,GAAGC,QAAX;AACA,MAAIC,IAAI,GAAGD,QAAX;AACA,MAAIE,IAAI,GAAGF,QAAX;AACA,MAAIG,IAAI,GAAG,CAACH,QAAZ;AACA,MAAII,IAAI,GAAG,CAACJ,QAAZ;AACA,MAAIK,IAAI,GAAG,CAACL,QAAZ;;AAEA,OAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,MAAM,CAACS,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtCP,IAAAA,IAAI,GAAGS,IAAI,CAACC,GAAL,CAASV,IAAT,EAAeD,MAAM,CAACQ,CAAD,CAAN,CAAU,CAAV,CAAf,CAAP;AACAL,IAAAA,IAAI,GAAGO,IAAI,CAACC,GAAL,CAASR,IAAT,EAAeH,MAAM,CAACQ,CAAD,CAAN,CAAU,CAAV,CAAf,CAAP;AACAJ,IAAAA,IAAI,GAAGM,IAAI,CAACC,GAAL,CAASP,IAAT,EAAeJ,MAAM,CAACQ,CAAD,CAAN,CAAU,CAAV,CAAf,CAAP;AACAH,IAAAA,IAAI,GAAGK,IAAI,CAACE,GAAL,CAASP,IAAT,EAAeL,MAAM,CAACQ,CAAD,CAAN,CAAU,CAAV,CAAf,CAAP;AACAF,IAAAA,IAAI,GAAGI,IAAI,CAACE,GAAL,CAASN,IAAT,EAAeN,MAAM,CAACQ,CAAD,CAAN,CAAU,CAAV,CAAf,CAAP;AACAD,IAAAA,IAAI,GAAGG,IAAI,CAACE,GAAL,CAASL,IAAT,EAAeP,MAAM,CAACQ,CAAD,CAAN,CAAU,CAAV,CAAf,CAAP;AACD;;AAED,MAAMK,KAAK,GAAGH,IAAI,CAACE,GAAL,CAASP,IAAI,GAAGJ,IAAhB,EAAsBK,IAAI,GAAGH,IAA7B,EAAmCI,IAAI,GAAGH,IAA1C,CAAd;AACA,MAAMU,IAAI,GAAG,CAACb,IAAI,GAAGI,IAAR,IAAgB,CAA7B;AACA,MAAMU,IAAI,GAAG,CAACZ,IAAI,GAAGG,IAAR,IAAgB,CAA7B;AACA,MAAMU,IAAI,GAAG,CAACZ,IAAI,GAAGG,IAAR,IAAgB,CAA7B;;AAEA,OAAK,IAAIC,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGR,MAAM,CAACS,MAA3B,EAAmCD,EAAC,EAApC,EAAwC;AACtCR,IAAAA,MAAM,CAACQ,EAAD,CAAN,CAAU,CAAV,IAAe,CAACR,MAAM,CAACQ,EAAD,CAAN,CAAU,CAAV,IAAeM,IAAhB,IAAwBD,KAAvC;AACAb,IAAAA,MAAM,CAACQ,EAAD,CAAN,CAAU,CAAV,IAAe,CAACR,MAAM,CAACQ,EAAD,CAAN,CAAU,CAAV,IAAeO,IAAhB,IAAwBF,KAAvC;AACAb,IAAAA,MAAM,CAACQ,EAAD,CAAN,CAAU,CAAV,IAAe,CAACR,MAAM,CAACQ,EAAD,CAAN,CAAU,CAAV,IAAeQ,IAAhB,IAAwBH,KAAvC;AACD;AACF","sourcesContent":["// Fit point cloud in a 1x1x1 box centered at [0, 0, 0]\nexport function normalize(points) {\n  let xMin = Infinity;\n  let yMin = Infinity;\n  let zMin = Infinity;\n  let xMax = -Infinity;\n  let yMax = -Infinity;\n  let zMax = -Infinity;\n\n  for (let i = 0; i < points.length; i++) {\n    xMin = Math.min(xMin, points[i][0]);\n    yMin = Math.min(yMin, points[i][1]);\n    zMin = Math.min(zMin, points[i][2]);\n    xMax = Math.max(xMax, points[i][0]);\n    yMax = Math.max(yMax, points[i][1]);\n    zMax = Math.max(zMax, points[i][2]);\n  }\n\n  const scale = Math.max(xMax - xMin, yMax - yMin, zMax - zMin);\n  const xMid = (xMin + xMax) / 2;\n  const yMid = (yMin + yMax) / 2;\n  const zMid = (zMin + zMax) / 2;\n\n  for (let i = 0; i < points.length; i++) {\n    points[i][0] = (points[i][0] - xMid) / scale;\n    points[i][1] = (points[i][1] - yMid) / scale;\n    points[i][2] = (points[i][2] - zMid) / scale;\n  }\n}\n"],"file":"point-cloud-utils.js"}