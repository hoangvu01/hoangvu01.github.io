{"version":3,"sources":["../../../src/kml-loader/kml-loader.js"],"names":["XMLLoader","KMLParser","normalizeKML","KML_HEADER","DEFAULT_KML_OPTIONS","normalize","testText","text","startsWith","parseText","options","xml","kmlLoader","kml","parse","name","extension","supported","browserOnly","worker"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,kCAAtB;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,YAAP,MAAyB,kBAAzB;AAEA,IAAMC,UAAU,iGAAhB;AAKA,IAAMC,mBAAmB,GAAG;AAC1BC,EAAAA,SAAS,EAAE;AADe,CAA5B;;AAIA,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,SAAOA,IAAI,CAACC,UAAL,CAAgBL,UAAhB,CAAP;AACD;;AAED,SAASM,SAAT,CAAmBF,IAAnB,EAAwD;AAAA,MAA/BG,OAA+B,uEAArBN,mBAAqB;AACtD,MAAMO,GAAG,GAAGX,SAAS,CAACS,SAAV,CAAoBF,IAApB,CAAZ;AACA,MAAMK,SAAS,GAAG,IAAIX,SAAJ,CAAcU,GAAd,CAAlB;AACA,MAAME,GAAG,GAAGD,SAAS,CAACE,KAAV,EAAZ;AACA,SAAOJ,OAAO,CAACL,SAAR,GAAoBH,YAAY,CAACW,GAAD,CAAhC,GAAwCA,GAA/C;AACD;;AAED,eAAe;AACbE,EAAAA,IAAI,EAAE,KADO;AAEbC,EAAAA,SAAS,EAAE,KAFE;AAGbC,EAAAA,SAAS,EAAEjB,SAAS,CAACiB,SAHR;AAIbX,EAAAA,QAAQ,EAARA,QAJa;AAKbG,EAAAA,SAAS,EAATA,SALa;AAMbS,EAAAA,WAAW,EAAE,IANA;AAObC,EAAAA,MAAM,EAAE;AAPK,CAAf","sourcesContent":["import XMLLoader from '../formats/xml-loader/xml-loader';\nimport KMLParser from './kml-parser';\nimport normalizeKML from './kml-normalizer';\n\nconst KML_HEADER = `\\\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<kml xmlns=\"http://www.opengis.net/kml/2.2\">\n`;\n\nconst DEFAULT_KML_OPTIONS = {\n  normalize: true\n};\n\nfunction testText(text) {\n  return text.startsWith(KML_HEADER);\n}\n\nfunction parseText(text, options = DEFAULT_KML_OPTIONS) {\n  const xml = XMLLoader.parseText(text);\n  const kmlLoader = new KMLParser(xml);\n  const kml = kmlLoader.parse();\n  return options.normalize ? normalizeKML(kml) : kml;\n}\n\nexport default {\n  name: 'KML',\n  extension: 'kml',\n  supported: XMLLoader.supported,\n  testText,\n  parseText,\n  browserOnly: true,\n  worker: false\n};\n\n"],"file":"kml-loader.js"}